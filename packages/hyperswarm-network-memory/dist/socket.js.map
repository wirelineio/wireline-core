{"version":3,"sources":["../src/socket.js"],"names":["Socket","Duplex","constructor","options","_remote","_write","data","enc","cb","setTimeout","send","_read","setRemote","socket","buffer","destroyed","push"],"mappings":";;;;;;;AAIA;;AAJA;AACA;AACA;AAIA,MAAMA,MAAN,SAAqBC,cAArB,CAA4B;AAC1BC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,UAAMA,OAAN;AAEA,SAAKC,OAAL,GAAe,IAAf;AACD,GALyB,CAO1B;;;AACAC,EAAAA,MAAM,CAACC,IAAD,EAAOC,GAAP,EAAYC,EAAZ,EAAgB;AACpBC,IAAAA,UAAU,CAAC,MAAM;AACf,WAAKL,OAAL,CAAaM,IAAb,CAAkBJ,IAAlB;;AACAE,MAAAA,EAAE,CAAC,IAAD,EAAOF,IAAP,CAAF;AACD,KAHS,EAGP,CAHO,CAAV;AAID,GAbyB,CAe1B;;;AACAK,EAAAA,KAAK,GAAG,CAAE;;AAEVC,EAAAA,SAAS,CAACC,MAAD,EAAS;AAChB,SAAKT,OAAL,GAAeS,MAAf;;AACA,QAAIA,MAAM,CAACT,OAAP,KAAmB,IAAvB,EAA6B;AAC3BS,MAAAA,MAAM,CAACD,SAAP,CAAiB,IAAjB;AACD;AACF;;AAEDF,EAAAA,IAAI,CAACI,MAAD,EAAS;AACX,QAAI,KAAKC,SAAT,EAAoB;AAEpBN,IAAAA,UAAU,CAAC,MAAM;AACf,UAAI,KAAKM,SAAT,EAAoB;AAEpB,WAAKC,IAAL,CAAUF,MAAV;AACD,KAJS,EAIP,CAJO,CAAV;AAKD;;AAjCyB;;eAoCbd,M","sourcesContent":["//\n// Copyright 2019 Wireline, Inc.\n//\n\nimport { Duplex } from 'stream';\n\nclass Socket extends Duplex {\n  constructor(options) {\n    super(options);\n\n    this._remote = null;\n  }\n\n  // eslint-disable-next-line\n  _write(data, enc, cb) {\n    setTimeout(() => {\n      this._remote.send(data);\n      cb(null, data);\n    }, 1);\n  }\n\n  // eslint-disable-next-line\n  _read() {}\n\n  setRemote(socket) {\n    this._remote = socket;\n    if (socket._remote !== this) {\n      socket.setRemote(this);\n    }\n  }\n\n  send(buffer) {\n    if (this.destroyed) return;\n\n    setTimeout(() => {\n      if (this.destroyed) return;\n\n      this.push(buffer);\n    }, 1);\n  }\n}\n\nexport default Socket;\n"],"file":"socket.js"}